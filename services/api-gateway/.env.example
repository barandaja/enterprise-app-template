# Enterprise API Gateway Configuration

# Application Settings
APP_NAME="Enterprise API Gateway"
ENVIRONMENT="development"  # development, staging, production
DEBUG=true
HOST="0.0.0.0"
PORT=8000
WORKERS=4

# Security Settings - CRITICAL: Update these for production
JWT_SECRET_KEY="your-secret-key-here-must-be-at-least-32-characters-long"  # REQUIRED
ALLOWED_HOSTS="localhost,127.0.0.1,app.example.com,www.example.com"
CORS_ORIGINS="http://localhost:3000,https://app.example.com,https://www.example.com"
JWT_ALGORITHM="HS256"
JWT_ACCESS_TOKEN_EXPIRE=1800  # 30 minutes

# Database Settings - Optimized for 1000 concurrent users
DATABASE_URL="postgresql+asyncpg://gateway_user:gateway_pass@localhost:5432/gateway_db"
DATABASE_POOL_SIZE=50  # Increased for high concurrency
DATABASE_MAX_OVERFLOW=150  # Max 200 total connections
DATABASE_POOL_TIMEOUT=30

# Redis Settings - Optimized for 1000 concurrent users
REDIS_URL="redis://localhost:6379/0"
REDIS_POOL_SIZE=50  # Increased for high concurrency
REDIS_TIMEOUT=5

# Service Discovery
SERVICE_REGISTRY_TTL=30
SERVICE_HEALTH_CHECK_INTERVAL=10

# Backend Services
AUTH_SERVICE_URL="http://localhost:8001"
USER_SERVICE_URL="http://localhost:8002"
BUSINESS_SERVICE_URLS="inventory=http://localhost:8003,orders=http://localhost:8004,payments=http://localhost:8005"

# Rate Limiting
GLOBAL_RATE_LIMIT_REQUESTS=1000
GLOBAL_RATE_LIMIT_WINDOW=60  # seconds
USER_RATE_LIMIT_REQUESTS=100
USER_RATE_LIMIT_WINDOW=60

# Circuit Breaker
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60
CIRCUIT_BREAKER_RESET_TIMEOUT=300

# Request/Response Settings
MAX_REQUEST_SIZE=10485760  # 10MB
REQUEST_TIMEOUT=30

# WebSocket Settings
WEBSOCKET_PING_INTERVAL=20
WEBSOCKET_PING_TIMEOUT=10
WEBSOCKET_MAX_CONNECTIONS=1000

# Monitoring and Observability
METRICS_ENABLED=true
TRACING_ENABLED=true
JAEGER_ENDPOINT="http://localhost:14268/api/traces"
PROMETHEUS_MULTIPROC_DIR="/tmp/prometheus_multiproc"

# Logging
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT="json"  # json, text
ACCESS_LOG_ENABLED=true

# Compliance
GDPR_ENABLED=true
HIPAA_ENABLED=true
SOC2_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years

# Caching
CACHE_DEFAULT_TTL=300  # 5 minutes
CACHE_AUTH_TTL=120     # 2 minutes - reduced for security
CACHE_MAX_SIZE=10000

# API Versioning
API_VERSION_HEADER="X-API-Version"
DEFAULT_API_VERSION="v1"
SUPPORTED_API_VERSIONS="v1,v2"

# Documentation
DOCS_AGGREGATION_ENABLED=true
DOCS_CACHE_TTL=3600  # 1 hour